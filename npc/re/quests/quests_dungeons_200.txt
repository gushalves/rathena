//===== rAthena Script =======================================
//= New dungeons
//===== Description: =========================================
//= [Walkthrough Conversion]
//===== Changelog: ===========================================
//= 1.0 Added nif_dun01 and nif_dun02 quests. [Capuche]
//============================================================

// nif_dun
moc_para01,14,19,7	script	Old scholar#lv200	2_M_SAGE_OLD,{
	if (BaseLevel < 200) {
		mes "[Old scholar]";
		mes "I would like to do more research, but if my life is really in danger...";
		next;
		mes "[Old scholar]";
		mes "I have no choice but to hire a strong and sincere adventurer. Hmm...";
		next;
		mes "[Old scholar]";
		mes "I think level 200 would be enough... It's easy to say, but I'm not the type of person who can be easily found.";
		close;
	}
	switch( isbegin_quest(8640) ) {
	case 0:
		if (isbegin_quest(8639) == 0) {
			mes "[Old scholar]";
			mes "Oh, oh my, my gosh. The strong and sincere adventurer I've been looking for has appeared here.";
			mes "Would you like to help me with my research?";
			next;
			if (select( "Listen to the request", "Suspicious..." ) == 2) {
				mes "[Old scholar]";
				mes "Even if you look at my eyes that recognized your skills at a glance, please do something...!";
				close;
			}
			mes "[Old scholar]";
			mes "Please don't do that even if you look at my eyes, which recognized your skills at a glance...!";
			mes "...?";
			mes "What? Will you help me?";
			next;
			mes "{Old scholar]";
			mes "No, that's it... Everyone refused, so the hanging words got stuck in my mouth.";
			mes "Thank you for your cooperation.";
			next;
			select( "You're still cooperating..." );
			mes "[Old scholar]";
			mes "Come on, that's it. Of course, if you are as talented as you, you can go to Niflheim.";
			mes "Of course I don't have many days left to go, but it's not the right time and I can't come back.";
			next;
			mes "[Old scholar]";
			mes "According to recent sources... Deep in the darkness of Niflheim, the dead hold a banquet.";
			mes "in a form we cannot imagine.";
			mes "But there is nowhere to hear more about it.";
			next;
			mes "[Old scholar]";
			mes "You'll find out soon anyway, but I'm curious now.";
			mes "Can you take a look? I'll give you plenty of examples.";
			next;
			if (select( "That's enough. Can I come back?", "What if I can't come back?" ) == 2) {
				mes "[Old scholar]";
				mes "You wouldn't even think that you wouldn't be able to come back to your level...";
				mes "If you're still that careful, okay. Come back when you're ready.";
				close;
			}
			setquest 8639;
			mes "[Garim Springfield]";
			mes "Thank you. Turns out I forgot to introduce myself.";
			mes "My name is Garim Springfield.";
			mes "I worked at Sage Castle for a long time... Now that I'm retired, I want to spend some leisure time here and also put in requests...";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Relax...";
			next;
			mes "[Garim Springfield]";
			mes "Yes. It's free.";
			mes "Give me a wish, an idle old man.";
			mes "Then I'll wait for the good news.";
			close;
		}
		mes "[Garim Springfield]";
		mes "What are you doing? Go fast.";
		close;
	case 1:
		mes "[Garim Springfield]";
		mes "Huh? Did you really visit the banquet hall deep in Niflheim?";
		mes "You came back alive?";
		mes "Okay then, let me tell you a story.";
		next;
		mes "[Garim Springfield]";
		mes "Hmm hmm... I see!";
		mes "I prepared like this, so I won't be afraid if I go later!";
		next;
		mes "[Garim Springfield]";
		mes "The research will last forever...!";
		completequest 8640;
		close;
	case 2:
		mes "[Garim Springfield]";
		mes "It made me feel better because I thought that research could be done even after death.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "BaseLevel >= 200 && isbegin_quest(8639) == 0 && isbegin_quest(8640) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8640) == 1" );
	end;
}

niflheim,164,102,3	script	Tired looking dead#lv20	4_F_NFDEADMGCIAN,{
	switch( isbegin_quest(8640) ) {
	case 0:
		switch( isbegin_quest(8639) ) {
		case 0:
			mes "[Tired looking dead]";
			mes "Ha-am...";
			mes "I can't sleep";
			mes "What's the fuss that you can't sleep even after you're dead.";
			mes "Let's get some sleep...";
			mes "I'm going to die of noise";
			close;
		case 1:
			mes "[Tired looking dead]";
			mes "Ha-am...";
			mes "Huh? What, I don't deal with peddlers.";
			next;
			if (select( "You have a bad complexion", "Go back quietly" ) == 2) {
				mes "[Tired looking dead]";
				mes "Oh, did you mean to ask if there were sleeping pills... But I'm dead... You won't hear... Hmm.";
				close;
			}
			mes "[Tired looking dead]";
			mes "Uh, how did you know?";
			mes "Your complexion is so bad... you look real.";
			mes "Do you have a sleeping pill?";
			next;
			select("I'm not a junkie" );
			mes "[Tired looking dead]";
			mes "Ah... I'm sorry. I misunderstood. All the people who have come this far are weird kids or people who sell drugs, so I kicked them out.";
			next;
			mes "[Tired looking dead]";
			mes "By the way... how did you know I looked tired? Is my complexion that bad?";
			next;
			mes "[Tired looking dead]";
			mes "Actually, I've been dead for a while, but I've only recently been to Niflheim. So I decided to sleep here in this house...";
			mes "You can't sleep at night because it's so noisy next door.";
			next;
			mes "[Tired looking dead]";
			mes "No, the pain of not being able to sleep because of the noise next door...";
			mes "Oh, not this next door. Everyone ran away here.";
			mes "Because it's cheap, there's a reason...";
			next;
			mes "[Tired looking dead]";
			mes "Yes, <NAVI>[there]<INFO>niflheim,148,124,0,101,0</INFO></NAVI>";
			mes "The crazy villagers over there... they have a banquet every day.";
			next;
			mes "[Tired looking dead]";
			mes "Because every day is a day in that place, every day!!";
			next;
			mes "[Tired looking dead]";
			mes "Ha... I know, even if it's every day, there's a set time.";
			mes "By the way... If you were a drinker who would have gone home on time while you were alive, would you do that even in death?";
			next;
			mes "[Tired looking dead]";
			mes "I'm... dead, so I just want to sleep peacefully...";
			mes "I hope someone knocks them down and returns them after the banquet is over.";
			next;
			select( "Banquet is..." );
			mes "[Tired looking dead]";
			mes "Yeah. ...you look pretty strong, there's alcohol... it's dead, so it's magic.";
			mes "If you can silence those who are drunk with magical powers all night long, I will reward you.";
			mes "Yes, of course every day.";
			next;
			mes "[Milla]";
			mes "I am Milla. I am now a resident of Niflheim.";
			mes "Please help me sleep, my dear.";
			erasequest 8639;
			setquest 8640;
			close;
		case 2:
			end;
		}
		end;
	case 1:
	case 2:
		mes "[Milla]";
		mes "Yes, thank you for coming back.";
		mes "Ha-am...";
		mes "For me and my neighbors... for a good night's sleep.";
		next;
		if (select( "Listen to the request.", "Reject." ) == 2) {
			mes "[Milla]";
			mes "You can't do this if you're busy...";
			mes "Ah, after all, the living do not hear that sound. Is this my agony only known to the dead...";
			npctalk "Another Dead: Noisy! Get some sleep!", "#lv200althema", bc_self;
			npctalk "Another Dead: He really can't sleep!", "#lv200althema2", bc_self;
			close;
		}
		mes "[Milla]";
		mes "Beloved living, thank you for your mercy.";
		mes "It's a luxurious facility with a banquet hall and an opera house, but each one is a little different.";
		mes "I'll ask for that kind of skill based on your kindness...";
		next;
		switch( select( "He looks cute", "That's not an instrument", "Plays the piano", "Guys with messy hair", "The ones with dolls", "Wake them up", "Stop" ) ) {
		case 1:
			switch( checkquest(8642,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8642;
				break;
			}
			switch( checkquest(8641,HUNTING) ) {
			case -1:
				mes "[Milla]";
				mes "They look cute... they're terribly noisy.";
				mes "^0000FF" + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "^000000,";
				mes "^0000FF" + getmonsterinfo("LUDE_GAL", MOB_NAME) + "^000000";
				next;
				mes "[Milla]";
				mes "I wish I could beat 15 " + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "";
				mes "and 15 of their mate " + getmonsterinfo("LUDE_GAL", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8641;
				close;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I wish I could beat 15 " + getmonsterinfo("GHOST_CUBE", MOB_NAME) + "";
				mes "and 15 of their mate " + getmonsterinfo("LUDE_GAL", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				close;
			case 2:
				mes "[Milla]";
				mes "Kya, did you hear them scream all the way here?";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "I have to make this commotion again tomorrow.";
				mes "Thank you.";
				erasequest 8641;
				setquest 8642;
				// getexp 15642570,10949790;	// pre-rebalance
				getexp 20300909,14210636;	// rebalance (unknown jexp, 70% of baseexp)
				close;
			}
			end;
		case 2:
			switch( checkquest(8645,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8645;
				break;
			}
			switch( checkquest(8644,HUNTING) ) {
			case -1:
				mes "[Milla]";
				mes "It's called ^0000FF" + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "^000000.";
				mes "They have knives in their hands... ";
				mes "It's too loud to knock anywhere!";
				next;
				mes "[Milla]";
				mes "I wish I could beat 10 " + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "";
				mes "and 10 of their mate " + getmonsterinfo("GAN_CEANN", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead.";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8644;
				close;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I wish I could beat 10 " + getmonsterinfo("BRUTAL_MURDERER", MOB_NAME) + "";
				mes "and 10 of their mate " + getmonsterinfo("GAN_CEANN", MOB_NAME) + ", who haunted the banquet hall of the dead,";
				mes "and make them holy for a day.";
				close;
			case 2:
				mes "[Milla]";
				mes "Kya, did you hear the sound of their cleavers and their helmets flying all the way up to here?";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "Thank you.";
				erasequest 8644;
				setquest 8645;
				// getexp 10756120,7541880;	// pre-rebalance
				getexp 14106860,9874802;	// rebalance (unknown jexp, 70% of baseexp)
				close;
			}
			end;
		case 3:
			switch( checkquest(8648,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8648;
				break;
			}
			switch( isbegin_quest(8647) ) {
			case 0:
				mes "[Milla]";
				mes "If you go into the banquet hall of the dead there, there will be a piano.";
				mes "It actually screams when a living person knocks on it.";
				mes "Would it be fun?";
				next;
				mes "[Milla]";
				mes "Play the <NAVI>[piano]<INFO>nif_dun01,140,202,0,101,0</INFO></NAVI>";
				mes "of the banquet hall of the dead.";
				mes "There is no such thing as a request song.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8647;
				close;
			case 1:
				mes "[Milla]";
				mes "Play the <NAVI>[piano]<INFO>nif_dun01,140,202,0,101,0</INFO></NAVI>";
				mes "of the banquet hall of the dead.";
				mes "There is no such thing as a request song.";
				close;
			case 2:
				mes "[Milla]";
				mes "Hahaha, did you hear that? It's like alcohol... No, it's like that if you drink magic and act like a hawk.";
				mes "I think I can sleep a little deeper today thanks to you...";
				mes "Thank you.";
				erasequest 8647;
				erasequest 8649;
				setquest 8648;
				getexp 10000000,7500000;
				close;
			}
			end;
		case 4:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8651,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8651;
				break;
			}
			switch( isbegin_quest(8650) ) {
			case 0:
			case 1:
				switch( checkquest(8650,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I mean, there are kids called ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000. ";
					mes "He's got his hair like a bomb hit, and he looks so excited.";
					mes "^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000, it can't be that loud when you get together with guys with broom hair.";
					next;
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8650;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Huh, huh, I can hear the bomb head dusting all the way up to here.";
					mes "Thanks to you, I will sleep well today.";
					mes "Thank you. See you again tomorrow.";
					completequest 8650;
					setquest 8651;
					getexp 44984725,31489308;	// rebalance (unknown jexp, 70% of baseexp)
					close;
				}
				end;
			case 2:
				switch( checkquest(8652,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8652;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 15 ^0000FF" + getmonsterinfo("DISGUISER", MOB_NAME) + "^000000 and the 15 ^0000FF" + getmonsterinfo("BLUEMOON_LOLI_RURI", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Huh, huh, I can hear the bomb head dusting all the way up to here.";
					mes "Thanks to you, I will sleep well today.";
					mes "Thank you. See you again tomorrow.";
					erasequest 8652;
					setquest 8651;
					getexp 44984725,31489308;	// rebalance (unknown jexp, 70% of baseexp)
					close;
				}
				end;
			}
			end;
		case 5:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8654,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8654;
				break;
			}
			switch( isbegin_quest(8653) ) {
			case 0:
			case 1:
				switch( checkquest(8653,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "If you look at the collapsed opera house there,";
					mes "you'll see kids wearing dolls. There's " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000...";
					mes "All the dolls they wear are so noisy.";
					next;
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8653;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Kepok, what did you really do?";
					mes "A while ago, " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + " went home saying they wouldn't make a noise again.";
					mes "Of course not. I will come again tomorrow.";
					mes "Thank you. See you tomorrow.";
					completequest 8653;
					setquest 8654;
					getexp 29944101,20960871;	// rebalance (unknown jexp, 70% of baseexp)
					close;
				}
				end;
			case 2:
				switch( checkquest(8655,HUNTING) ) {
				case -1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					next;
					if (select( "I accept", "I'm busy today" ) == 2) {
						mes "[Milla]";
						mes "Ummm...";
						mes "Yeah... Well, I don't die just because I can't sleep...";
						mes "I'm already dead";
						close;
					}
					mes "[Milla]";
					mes "Thank you for your kind heart.";
					mes "Blessed be the mercy of the living!";
					setquest 8655;
					close;
				case 0:
				case 1:
					mes "[Milla]";
					mes "I hope you show the hot taste to";
					mes "the 10 ^0000FF" + getmonsterinfo("GROTE", MOB_NAME) + "^000000 and the 10 ^0000FF" + getmonsterinfo("PIERROTZOIST", MOB_NAME) + "^000000";
					mes "that haunt the collapsed Opera House.";
					close;
				case 2:
					mes "[Milla]";
					mes "Kepok, what did you really do?";
					mes "A while ago, " + getmonsterinfo("GROTE", MOB_NAME) + " and " + getmonsterinfo("PIERROTZOIST", MOB_NAME) + " went home saying they wouldn't make a noise again.";
					mes "Of course not. I will come again tomorrow.";
					mes "Thank you. See you tomorrow.";
					erasequest 8655;
					setquest 8654;
					getexp 29944101,20960871;	// rebalance (unknown jexp, 70% of baseexp)
					close;
				}
				end;
			}
			end;
		case 6:
			if (BaseLevel < 240) {
				mes "[Milla]";
				mes "Hmm... no.";
				mes "It's still too early to leave it to you...";
				mes "I'll wait until you reach level 240.";
				mes "I have time.";
				close;
			}
			switch( checkquest(8657,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				mes "[Milla]";
				mes "I think they've had enough home today.";
				mes "I hope you can help me tomorrow if you have time.";
				close;
			case 2:
				erasequest 8657;
				break;
			}
			switch( isbegin_quest(8656) ) {
			case 0:
				mes "[Milla]";
				mes "The smashed... no, don't say that.";
				mes "If you go to the collapsed opera house, you will find ghosts in the frames.";
				mes "But they don't even have a body...";
				mes "Snoring, my dear.";
				next;
				mes "[Milla]";
				mes "A <NAVI>[ghost talking]<INFO>nif_dun02,37,221,0,101,0</INFO></NAVI>";
				mes "and <NAVI>[snoring]<INFO>nif_dun02,249,221,0,101,0</INFO></NAVI>";
				mes "inside the banquet hall of the dead, twist your nose.";
				mes "You need to calm them down.";
				next;
				if (select( "I accept", "I'm busy today" ) == 2) {
					mes "[Milla]";
					mes "Ummm...";
					mes "Yeah... Well, I don't die just because I can't sleep...";
					mes "I'm already dead";
					close;
				}
				mes "[Milla]";
				mes "Thank you for your kind heart.";
				mes "Blessed be the mercy of the living!";
				setquest 8656;
				close;
			case 1:
				if (isbegin_quest(8658) == 0 || isbegin_quest(8659) == 0) {
					mes "[Milla]";
					mes "A <NAVI>[ghost talking]<INFO>nif_dun02,37,221,0,101,0</INFO></NAVI>";
					mes "and <NAVI>[snoring]<INFO>nif_dun02,249,221,0,101,0</INFO></NAVI>";
					mes "inside the banquet hall of the dead, twist your nose.";
					mes "You need to calm them down.";
					close;
				}
				mes "[Milla]";
				mes "...I can't eat any more...";
				mes "...hick.";
				mes "Oh, have you been there? I fell asleep without realizing it.";
				mes "It's really annoying to hear that snoring all the way...";
				next;
				mes "[Milla]";
				mes "It seems that the living do not hear well.";
				mes "Anyway, thank you for today.";
				mes "Sleep is precious...";
				mes "Sleep enough while you're alive.";
				erasequest 8656;
				erasequest 8658;
				erasequest 8659;
				setquest 8657;
				getexp 13000000,9100000;	// rebalance (unknown jexp, 70% of baseexp)
				close;
			case 2:
				end;
			}
			end;
		case 7:
			mes "[Milla]";
			mes "You can't do this if you're busy...";
			mes "Ah, after all, the living do not hear that sound. Is this my agony only known to the dead...";
			npctalk "Another Dead: Noisy! Get some sleep!", "#lv200althema", bc_self;
			npctalk "Another Dead: He really can't sleep!", "#lv200althema2", bc_self;
			close;
		}
		end;
	}
	end;

OnInit:
	// prerequisite
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8639) == 1" );

	// daily
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8641,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8644,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8647) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8650,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8652,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8653,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8655,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8658) == 1 && isbegin_quest(8659) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8642,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8645,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8648,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8651,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8654,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(8657,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(8641,HUNTING) == -1 && checkquest(8642,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (checkquest(8644,HUNTING) == -1 && checkquest(8645,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 200 && (isbegin_quest(8647) == 0 && checkquest(8648,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (checkquest(8650,HUNTING) == -1 && checkquest(8651,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && isbegin_quest(8650) == 2 && checkquest(8652,HUNTING) == -1 && checkquest(8651,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (checkquest(8653,HUNTING) == -1 && checkquest(8654,PLAYTIME) == -1)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && isbegin_quest(8653) == 2 && checkquest(8655,HUNTING) == -1 && checkquest(8654,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "BaseLevel >= 240 && (isbegin_quest(8656) == 0 && checkquest(8657,PLAYTIME) == -1)" );
	end;
}

niflheim,160,106,3	duplicate(dummy_npc)	#lv200althema	CLEAR_NPC
niflheim,165,105,3	duplicate(dummy_npc)	#lv200althema2	CLEAR_NPC


niflheim,143,125,6	script	Funny Gatekeeper's Friend#lv20	LUDE_GAL,{
	npctalk "Funny Gatekeeper's Friend: Sing~ All night~ or forever~", "", bc_self;
	end;
}

niflheim,145,126,6	script	Angry Gatekeeper#lv200	GHOST_CUBE,{
	npctalk "Angry Gatekeeper: Kye-Look! Living! Play! No need to go!", "", bc_self;
	npctalk "Funny Gatekeeper's Friend: No need to leave! Play with us!", "Funny Gatekeeper's Friend#lv20", bc_self;
	end;
}

nif_dun01,140,202,3	script	Piano#lv200	CLEAR_NPC,{
	if (isbegin_quest(8647) == 1) {
		mes "I couldn't hear anything, but the dead around me seem to be in an uproar.";
		mes "Let's report to Milla.";
		completequest 8647;
		setquest 8649;
		npctalk "Clink clink... Crackle!", "Piano#lv200", bc_self;
		npctalk "Sleep alive! Kyaaak!", "Exciting Cello#lv200", bc_self;
		npctalk "The living man plays the piano!", "Dancing Cello#lv200", bc_self;
		npctalk "Oh my God, I can't really play...", "Quiet Cello#lv200", bc_self;
		npctalk "How could that be...", "Stranger Cello#lv200", bc_self;
		npctalk "You ruined the atmosphere!", "Happy Cello#lv200", bc_self;
		npctalk "Piano Ooo!!!", "Serious Contrabass#lv2", bc_self;
		npctalk "The piano is stunned...", "Sleek Harp#lv200", bc_self;
		close;
	}
	// note: no text
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8647) == 1" );
	end;
}
nif_dun01,133,198,3	duplicate(dummy_npc)	Exciting Cello#lv200	CLEAR_NPC
nif_dun01,138,195,3	duplicate(dummy_npc)	Dancing Cello#lv200	CLEAR_NPC
nif_dun01,153,195,3	duplicate(dummy_npc)	Quiet Cello#lv200	CLEAR_NPC
nif_dun01,152,198,3	duplicate(dummy_npc)	Stranger Cello#lv200	CLEAR_NPC
nif_dun01,157,198,3	duplicate(dummy_npc)	Happy Cello#lv200	CLEAR_NPC
nif_dun01,156,202,3	duplicate(dummy_npc)	Serious Contrabass#lv2	CLEAR_NPC
nif_dun01,133,201,3	duplicate(dummy_npc)	Sleek Harp#lv200	CLEAR_NPC

nif_dun01,148,43,3	script	Helpful Gatekeeper#240	DISGUISER,{
	if (BaseLevel < 240) {
		npctalk "Helpful Gatekeeper: Uh-huh-huh. You don't have enough grooming to get through here.", "", bc_self;
		npctalk "Silent Gatekeeper: ...means you are under-leveled.", "Silent Gatekeeper#240", bc_self;
		end;
	}
	npctalk "Helpful Gatekeeper: Uh-huh-huh. Mountain, go up. Can't come down.", "", bc_self;
	npctalk "Silent Gatekeeper: ...means welcome.", "Silent Gatekeeper#240", bc_self;
	end;
}

nif_dun01,143,43,7	script	Silent Gatekeeper#240	GROTE,{
	npctalk "Silent Gatekeeper: ...", "", bc_self;
	end;
}

nif_dun02,37,221,3	script	Sleep Talking Ghost#lv240	CLEAR_NPC,3,3,{
	if (isbegin_quest(8656) == 1) {
		switch( isbegin_quest(8659) ) {
		case 0:
			setquest 8659;
			mes "I twisted the nose of the ghost in the frame.";
			mes "There was no touch, but the ghost stopped talking.";
			npctalk "????????!", "", bc_self;
			if (isbegin_quest(8658) == 1)
				mes "Let's go report to Milla.";
			close;
		case 1:
			mes "The ghost that was talking about is not seen, and another ghost is sleeping.";
			close;
		default:
			end;
		}
	}
	end;

OnTouch:
	if (isbegin_quest(8659) == 0) {
		npctalk "I want to eat it too... it looks delicious...", "", bc_self;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8659) == 0" );
	end;
}

nif_dun02,249,221,3	script	Snoring Ghost#lv240	CLEAR_NPC,3,3,{
	if (isbegin_quest(8656) == 1) {
		switch( isbegin_quest(8658) ) {
		case 0:
			setquest 8658;
			mes "I twisted the nose of the ghost in the frame.";
			mes "There was no touch, but the ghost stopped snoring.";
			npctalk "Nang!", "", bc_self;
			if (isbegin_quest(8659) == 1)
				mes "Let's go report to Milla.";
			close;
		case 1:
			mes "The snoring ghost is nowhere to be seen, and another ghost is sleeping.";
			close;
		default:
			end;
		}
	}
	end;

OnTouch:
	if (isbegin_quest(8658) == 0)
		npctalk "Dorolong Dorolong...", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8656) == 1 && isbegin_quest(8658) == 0" );
	end;
}
